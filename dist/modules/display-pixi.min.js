/*! CloudKidFramework 0.0.3 */
!function(){"use strict";var a=function(a,b){this.id=a,b=b||{},this.canvas=document.getElementById(a),this.canvas.onmousedown=function(a){a.preventDefault()},this.width=this.canvas.width,this.height=this.canvas.height,this._visible="none"!=this.canvas.style.display,this.stage=new PIXI.Stage(b.backgroundColor||0);var c=!!b.preMultAlpha,d=!!b.transparent,e=!!b.antiAlias,f=!!b.preserveDrawingBuffer;d&&!c&&(d="notMultiplied"),this.renderer="canvas2d"==b.forceContext?new PIXI.CanvasRenderer(this.width,this.height,this.canvas,d):"webgl"==b.forceContext?new PIXI.WebGLRenderer(this.width,this.height,this.canvas,d,e,f):PIXI.autoDetectRenderer(this.width,this.height,this.canvas,d,!1,c),this.renderer.clearView=!!b.clearView,this.enabled=!0,this.isWebGL=this.renderer instanceof PIXI.WebGLRenderer,this.Animator=cloudkid.pixi.Animator},b=a.prototype={};b.canvas=null,b.id=null,b.width=0,b.height=0,b.stage=null,b.renderer=null,b.isWebGL=null,b.paused=!1,b._enabled=!1,Object.defineProperty(b,"enabled",{get:function(){return this._enabled},set:function(a){this._enabled=a,a?this.stage.setInteractive(!0):(this.stage.setInteractive(!1),this.stage.forceUpdateInteraction())}}),b._visible=!1,Object.defineProperty(b,"visible",{get:function(){return this._visible},set:function(a){this._visible=a,this.canvas.style.display=a?"block":"none"}}),b.resize=function(a,b){this.width=this.canvas.width=a,this.height=this.canvas.height=b,this.renderer.resize(a,b)},b.render=function(){!this.paused&&this._visible&&this.renderer.render(this.stage)},b.destroy=function(){this.enabled=!1,this.stage.removeChildren(!0),this.stage.destroy(),this.renderer.destroy(),this.canvas.onmousedown=null,this.renderer=this.stage=this.canvas=null},namespace("cloudkid").PixiDisplay=a,namespace("cloudkid.pixi").PixiDisplay=a}(),function(){"use strict";var a=function(){},b=null,c=0,d=null;a.soundLib=null,a.captions=null,a.init=function(){d=[],b=[]},a.play=function(l,m,n,o,p,q,r){var s=null;if(n&&"function"==typeof n?(s=n,n={}):n?s=n.onComplete||null:n={},null===l||!(l instanceof PIXI.Spine)&&!l.updateAnim)return void(s&&s());a.stop(l),o=n.loop||o||!1,p=n.speed||p||1,q=n.startTime||q,q=q?.001*q:0,r=n.soundData||r||null;var t=d.length?d.pop().init(l,s,p):new k(l,s,p);if(t.isSpine){var u;if("string"==typeof m){if(!e(l,m))return f(t),void(s&&s());l.state.setAnimationByName(m,o),l.updateAnim(q>0?q*t.speed:0)}else if("string"==typeof m[0]){for(l.state.setAnimationByName(m[0],!1),u=1;u<m.length;++u)l.state.addAnimationByName(m[u],o&&u==m.length-1);l.updateAnim(q>0?q*t.speed:0)}else for(t.spineStates=new Array(m.length),t.speed=new Array(m.length),u=0;u<m.length;++u){var v=new PIXI.spine.AnimationState(l.stateData);t.spineStates[u]=v,v.setAnimationByName(m[u].anim,o||m[u].loop),t.speed[u]=m[u].speed?m[u].speed:p||1,q>0&&v.update(q*t.speed[u]),v.apply(l.skeleton)}}else m&&m instanceof Array&&(l.textures=m,l.updateDuration()),l.loop=o,l.onComplete=j.bind(this,t),l.gotoAndPlay(0),q>0&&l.updateAnim(q*t.speed);return r&&(t.playSound=!0,"string"==typeof r?(t.soundStart=0,t.soundAlias=r):(t.soundStart=r.start>0?r.start:0,t.soundAlias=r.alias),t.useCaptions=a.captions&&a.captions.hasCaption(t.soundAlias),0===t.soundStart?t.soundInst=a.soundLib.play(t.soundAlias,i.bind(this,t),h.bind(this,t)):a.soundLib.preloadSound&&a.soundLib.preloadSound(r.alias)),t.loop=o,t.time=q>0?q:0,b.push(t),1==++c&&cloudkid.Application.instance.on("update",g),t},a.instanceHasAnimation=function(a,b){return a instanceof PIXI.Spine?e(a,b):!1};var e=function(a,b){return null!==a.stateData.skeletonData.findAnimation(b)};a.stop=function(a,d){for(var e=0;c>e;++e)if(b[e].clip===a){var h=b[e];b.splice(e,1),0===--c&&cloudkid.Application.instance.off("update",g),d&&h.callback&&h.callback(),h.soundInst&&h.soundInst.stop(),f(h);break}},a.stopAll=function(){for(var a=0;c>a;++a){var d=b[a];d.soundInst&&d.soundInst.stop(),f(d);break}cloudkid.Application.instance.off("update",g),b.length=c=0};var f=function(a){a.clip=null,a.callback=null,a.loop=!1,a.spineStates=null,a.speed=null,a.soundInst=null,d.push(a)},g=function(d){for(var e=.001*d,k=c-1;k>=0;--k){var l=b[k];if(!l.paused){var m=l.time;if(l.soundInst){if(!l.soundInst.isValid){j(l);continue}var n=.001*l.soundInst.position;0>n&&(n=0),l.time=l.soundStart+n,l.useCaptions&&a.captions.seek(l.soundInst.position)}else l.time+=e,l.playSound&&l.time>=l.soundStart&&(l.time=l.soundStart,l.soundInst=a.soundLib.play(l.soundAlias,i.bind(this,l),h.bind(this,l)),l.useCaptions&&(a.captions.isSlave=!0,a.captions.run(l.soundAlias)));var o=l.clip;if(l.isSpine)if(l.spineStates){for(var p=!1,q=0,r=l.spineStates.length;r>q;++q){var s=l.spineStates[q];s.update((l.time-m)*l.speed[q]),s.apply(o.skeleton),!s.currentLoop&&s.isComplete()&&(p=!0)}p&&(b.splice(k,1),c--,l.useCaptions&&a.captions.stop(),l.callback&&l.callback(),f(l))}else{o.updateAnim((l.time-m)*l.speed);var t=o.state;!t.currentLoop&&0===t.queue.length&&t.currentTime>=t.current.duration&&(b.splice(k,1),c--,l.useCaptions&&captions.stop(),l.callback&&l.callback(),f(l))}else o.updateAnim((l.time-m)*l.speed)}}0===c&&cloudkid.Application.instance.off("update",g)},h=function(a){a.playSound=!1,a.soundEnd=a.soundStart+.001*a.soundInst.length},i=function(a){a.soundEnd>0&&a.time<a.soundEnd&&(a.time=a.soundEnd),a.soundInst=null},j=function(d){for(var e=0;c>e;++e)if(b[e]===d){var h=b[e];h.useCaptions&&a.captions.stop(),h.clip.onComplete=null,b.splice(e,1),0===--c&&cloudkid.Application.instance.off("update",g),h.callback&&h.callback(),f(h);break}};a.destroy=function(){captions=null,_instance=null,d=null,b=null,cloudkid.Application.instance.off("update",g),_boundUpdate=null};var k=function(a,b,c){this.init(a,b,c)};k.constructor=k,k.prototype.init=function(a,b,c){return this.clip=a,this.isSpine=a instanceof PIXI.Spine,this.callback=b,this.speed=c,this.spineStates=null,this.loop=null,this.time=0,this.soundAlias=null,this.soundInst=null,this.playSound=!1,this.soundStart=0,this.soundEnd=0,this.useCaptions=!1,this._paused=!1,this},Object.defineProperty(k.prototype,"paused",{get:function(){return this._paused},set:function(a){a!=this._paused&&(this._paused=!!a,this.soundInst&&(this.paused?this.soundInst.pause():this.soundInst.unpause()))}}),cloudkid.Application.registerInit(a.init),cloudkid.Application.registerDestroy(a.destroy),namespace("cloudkid").Animator=a,namespace("cloudkid.pixi").Animator=a}(),function(a){"use strict";function b(a){if(!a||"object"!=typeof a)return null;var b=a.constructor();for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function c(a,b){if(a===b)return!0;for(var c in a)if(a[c]!=b[c])return!1;return!0}var d=function(a,b,c){a&&(PIXI.DisplayObjectContainer.call(this),this.initialize(a,b,c))},e=d.prototype=Object.create(PIXI.DisplayObjectContainer.prototype);e.back=null,e.label=null,e.releaseCallback=null,e.overCallback=null,e.outCallback=null,e._stateFlags=null,e._statePriority=null,e._stateData=null,e._currentLabelStyle=null,e._offset=null,e._overCB=null,e._outCB=null,e._downCB=null,e._upCB=null,e._upOutCB=null,e._width=0,e._height=0;var f=["disabled","enabled","up","over","down"],g=["disabled","down","over","up"];e.initialize=function(c,d,e){this.back=new PIXI.Sprite(c.up),this.addChild(this.back),this._overCB=this._onOver.bind(this),this._outCB=this._onOut.bind(this),this._downCB=this._onDown.bind(this),this._upCB=this._onUp.bind(this),this._upOutCB=this._onUpOutside.bind(this);var f=this._stateData={};this._stateFlags={},this._offset=new PIXI.Point;var h;if(d){h=b(d),delete h.text,delete h.type,h.x===a&&(h.x="center"),h.y===a&&(h.y="center");var i=h.style=b(d.style);"bitmap"==d.type?i.align=i.align||"left":(i.font=i.font||"bold 20pt Arial",i.fill=i.fill||"black",i.align=i.align||"left",i.stroke=i.stroke||"black",i.strokeThickness=i.strokeThickness||0,i.wordWrap=i.wordWrap||!1,i.wordWrapWidth=i.wordWrapWidth||100)}this._statePriority=c.priority||g;for(var j=this._statePriority.length-1;j>=0;--j){var k=this._statePriority[j];this._addProperty(k),"disabled"!=k&&"up"!=k&&(this._stateFlags[k]=!1);var l=c[k];if(f[k]=l?l.tex?{tex:l.tex}:{tex:l}:f.up,d)if(l&&l.label){l=l.label;var m=f[k].label={};m.style=l.style||h.style,m.x=l.x||h.x,m.y=l.y||h.y}else f[k].label=h}if(f.up||(Debug.error("Button lacks an up state! This is a serious problem! Input data follows:"),Debug.error(c)),f.over||(f.over=f.up),f.down||(f.down=f.up),f.disabled||(f.disabled=f.up),c.offset?(this._offset.x=c.offset.x,this._offset.y=c.offset.y):this._offset.x=this._offset.y=0,c.scale){var n=c.scale||1;this.back.scale.x=this.back.scale.y=n}d&&(this.label="bitmap"==d.type?new PIXI.BitmapText(d.text,h.style):new PIXI.Text(d.text,h.style),this.addChild(this.label)),this.back.x=this._offset.x,this.back.y=this._offset.y,this._width=this.back.width,this._height=this.back.height,this.enabled=e===a?!0:!!e},Object.defineProperty(e,"width",{get:function(){return this._width*this.scale.x},set:function(a){this.scale.x=a/this._width}}),Object.defineProperty(e,"height",{get:function(){return this._height*this.scale.y},set:function(a){this.scale.y=a/this._height}}),e.setText=function(a){if(this.label){this.label.setText(a),this.label instanceof PIXI.Text?(this.label.updateText(),this.label.dirty=!1):this.label.forceUpdateText();for(var b,c=0;c<this._statePriority.length;++c)if(this._stateFlags[this._statePriority[c]]){b=this._stateData[this._statePriority[c]];break}if(b||(b=this._stateData.up),b=b.label,"center"==b.x){var d=this.back.width,e=this.label.width;switch(this._currentLabelStyle.align){case"center":this.label.position.x=.5*d;break;case"right":this.label.position.x=.5*(d-e)+e;break;default:this.label.position.x=.5*(d-e)}}else this.label.position.x=b.x+this._offset.x;this.label.position.y="center"==b.y?.5*(this.back.height-this.label.height):b.y+this._offset.y}},Object.defineProperty(e,"enabled",{get:function(){return!this._stateFlags.disabled},set:function(a){this._stateFlags.disabled=!a,this.buttonMode=a,this.interactive=a,a?(this.mousedown=this.touchstart=this._downCB,this.mouseover=this._overCB,this.mouseout=this._outCB):(this.mousedown=this.touchstart=this.mouseover=this.mouseout=null,this.mouseup=this.touchend=this.mouseupoutside=this.touchendoutside=null,this._stateFlags.down=this._stateFlags.over=!1,this.__isOver=!1),this._updateState()}}),e._addProperty=function(a){f.indexOf(a)>=0||Object.defineProperty(this,a,{get:function(){return this._stateFlags[a]},set:function(b){this._stateFlags[a]=b,this._updateState()}})},e._updateState=function(){if(this.back){for(var a,b=0;b<this._statePriority.length;++b)if(this._stateFlags[this._statePriority[b]]){a=this._stateData[this._statePriority[b]];break}if(a||(a=this._stateData.up),this.back.setTexture(a.tex),this.label){if(a=a.label,this._currentLabelStyle&&c(this._currentLabelStyle,a.style)||(this.label.setStyle(a.style),this._currentLabelStyle=a.style,this.label instanceof PIXI.Text?(this.label.updateText(),this.label.dirty=!1):this.label.forceUpdateText()),"center"==a.x){var d=this.back.width,e=this.label.width;switch(this._currentLabelStyle.align){case"center":this.label.position.x=.5*d;break;case"right":this.label.position.x=.5*(d-e)+e;break;default:this.label.position.x=.5*(d-e)}}else this.label.position.x=a.x+this._offset.x;this.label.position.y="center"==a.y?.5*(this.back.height-this.label.height):a.y+this._offset.y}}},e._onOver=function(){this._stateFlags.over=!0,this._updateState(),this.overCallback&&this.overCallback(this)},e._onOut=function(){this._stateFlags.over=!1,this._updateState(),this.outCallback&&this.outCallback(this)},e._onDown=function(a){a.originalEvent.preventDefault(),this._stateFlags.down=!0,this._updateState(),this.mouseup=this.touchend=this._upCB,this.mouseupoutside=this.touchendoutside=this._upOutCB},e._onUp=function(a){a.originalEvent.preventDefault(),this._stateFlags.down=!1,this.mouseup=this.touchend=null,this.mouseupoutside=this.touchendoutside=null,this._updateState(),this.releaseCallback&&this.releaseCallback(this)},e._onUpOutside=function(){this._stateFlags.down=!1,this.mouseup=this.touchend=null,this.mouseupoutside=this.touchendoutside=null,this._updateState()},e.destroy=function(){this.mousedown=this.touchstart=this.mouseover=this.mouseout=null,this.mouseup=this.touchend=this.mouseupoutside=this.touchendoutside=null,this.removeChildren(),this.label=null,this.back=null,this.releaseCallback=null,this.overCallback=null,this.outCallback=null,this._stateData=null,this._stateFlags=null,this._statePriority=null,this._downCB=null,this._upCB=null,this._overCB=null,this._outCB=null,this._upOutCB=null},namespace("cloudkid").Button=d,namespace("cloudkid.pixi").Button=d}(),function(){"use strict";var a=function(a,b,c){this.initialize(a,b,c)},b=a.prototype={};b.draggedObj=null,b.dragStartThreshold=20,b.mouseDownStagePos=null,b.mouseDownObjPos=null,b.isTouchMove=!1,b.isHeldDrag=!1,b.isStickyClick=!1,b.allowStickyClick=!0,b.snapSettings=null,b._theStage=null,b._dragOffset=null,b._dragStartCallback=null,b._dragEndCallback=null,b._triggerHeldDragCallback=null,b._triggerStickyClickCallback=null,b._stageMouseUpCallback=null,b._updateCallback=null,b._draggableObjects=null;var c=null,d=0,e=1;b.initialize=function(a,b,d){this._updateCallback=this._updateObjPosition.bind(this),this._triggerHeldDragCallback=this._triggerHeldDrag.bind(this),this._triggerStickyClickCallback=this._triggerStickyClick.bind(this),this._stageMouseUpCallback=this._stopDrag.bind(this),this._theStage=a,this._dragStartCallback=b,this._dragEndCallback=d,this._draggableObjects=[],this.mouseDownStagePos=new PIXI.Point(0,0),this.mouseDownObjPos=new PIXI.Point(0,0),c=new PIXI.Point(0,0)},b.startDrag=function(a,b){this._objMouseDown(d,a,b)},b._objMouseDown=function(a,b,c){null===this.draggedObj&&(this.draggedObj=b,createjs.Tween.removeTweens(this.draggedObj),createjs.Tween.removeTweens(this.draggedObj.position),this._dragOffset=c.getLocalPosition(this.draggedObj.parent),this._dragOffset.x-=this.draggedObj.position.x,this._dragOffset.y-=this.draggedObj.position.y,this.mouseDownObjPos.x=this.draggedObj.position.x,this.mouseDownObjPos.y=this.draggedObj.position.y,this.mouseDownStagePos.x=c.global.x,this.mouseDownStagePos.y=c.global.y,this.allowStickyClick&&a!=e?(this.draggedObj.mousemove=this._triggerHeldDragCallback,this._theStage.interactionManager.stageUp=this._triggerStickyClickCallback):(this.isTouchMove=a==e,this.isHeldDrag=!0,this._startDrag()))},b._triggerStickyClick=function(){this.isStickyClick=!0,this.draggedObj.mousemove=null,this._theStage.interactionManager.stageUp=null,this._startDrag()},b._triggerHeldDrag=function(a){var b=a.global.x-this.mouseDownStagePos.x,c=a.global.y-this.mouseDownStagePos.y;b*b+c*c>=this.dragStartThreshold*this.dragStartThreshold&&(this.isHeldDrag=!0,this.draggedObj.mousemove=null,this._theStage.interactionManager.stageUp=null,this._startDrag())},b._startDrag=function(){var a=this._theStage.interactionManager;a.stageUp=this._stageMouseUpCallback,this.draggedObj.mousemove=this.draggedObj.touchmove=this._updateCallback,this._dragStartCallback(this.draggedObj)},b.stopDrag=function(a){this._stopDrag(null,a===!0)},b._stopDrag=function(a,b){this.draggedObj&&(this.draggedObj.touchmove=this.draggedObj.mousemove=null);var c=this._theStage.interactionManager;c.stageUp=null;var d=this.draggedObj;this.draggedObj=null,this.isTouchMove=!1,this.isStickyClick=!1,this.isHeldMove=!1,b!==!1&&this._dragEndCallback(d)},b._updateObjPosition=function(a){if(this.isTouchMove||this._theStage.interactionManager.mouseInStage){if(!this.draggedObj||!this.draggedObj.parent)return void this._stopDrag(null,!1);var b=a.getLocalPosition(this.draggedObj.parent,c),d=this.draggedObj._dragBounds;if(this.draggedObj.position.x=g(b.x-this._dragOffset.x,d.x,d.right),this.draggedObj.position.y=g(b.y-this._dragOffset.y,d.y,d.bottom),this.snapSettings)switch(this.snapSettings.mode){case"points":this._handlePointSnap(b);break;case"grid":break;case"line":}}},b._handlePointSnap=function(a){for(var b=this.snapSettings,c=b.dist*b.dist,d=b.points,e=a.x-this._dragOffset.x,g=a.y-this._dragOffset.y,h=-1,i=null,j=d.length-1;j>=0;--j){var k=d[j],l=f(e,g,k.x,k.y);c>=l&&(h>l||-1==h)&&(h=l,i=k)}i&&(this.draggedObj.position.x=i.x,this.draggedObj.position.y=i.y)};var f=function(a,b,c,d){var e=a-c,f=b-d;return e*e+f*f},g=function(a,b,c){return b>a?b:a>c?c:a},h=function(){this.mousedown=this._onMouseDownListener,this.touchstart=this._onTouchStartListener,this.buttonMode=this.interactive=!0},i=function(){this.mousedown=this.touchstart=null,this.buttonMode=this.interactive=!1},j=function(a,b){this._dragMan._objMouseDown(a,this,b)};b.addObject=function(a,b){if(!b){{cloudkid.Application.instance.display}b={x:0,y:0,width:canvas.width,height:canvas.height}}b.right=b.x+b.width,b.bottom=b.y+b.height,a._dragBounds=b,this._draggableObjects.indexOf(a)>=0||(a.enableDrag=h,a.disableDrag=i,a._onMouseDownListener=j.bind(a,d),a._onTouchStartListener=j.bind(a,e),a._dragMan=this,this._draggableObjects.push(a))},b.removeObject=function(a){var b=this._draggableObjects.indexOf(a);b>=0&&(a.disableDrag(),delete a.enableDrag,delete a.disableDrag,delete a._onMouseDownListener,delete a._onTouchStartListener,delete a._dragMan,delete a._dragBounds,this._draggableObjects.splice(b,1))},b.destroy=function(){null!==this.draggedObj&&this._stopDrag(null,!1),this._updateCallback=null,this._dragStartCallback=null,this._dragEndCallback=null,this._triggerHeldDragCallback=null,this._triggerStickyClickCallback=null,this._stageMouseUpCallback=null,this._theStage=null;for(var a=this._draggableObjects.length-1;a>=0;--a){var b=this._draggableObjects[a];b.disableDrag(),delete b.enableDrag,delete b.disableDrag,delete b._onMouseDownListener,delete b._dragMan,delete b._dragBounds}this._draggableObjects=null},namespace("cloudkid").DragManager=a,namespace("cloudkid.pixi").DragManager=a}(),function(){"use strict";var a={};a.scales=null;var b=null,c=null,d=null,e=null,f=null,g=null;a.lowHW=!1,a.init=function(g,i,j){a.scales={},c=g.assets,d={},f=g.path,b=g.sizing,e=g.scale,h(i,j)},a.getPreferredSize=function(){return g[0]},a.getPreferredScale=function(){return e[g[0]]};var h=function(a,c){for(var d,e=c>a?a:c,f=b.length-1;f>=0&&b[f].maxSize>e;--f)d=b[f];g=d.order};a.getUrl=function(b){var h=c[b];if(!h)return null;if(d[b])return d[b];var i;if(h.anim)return i=d[b]=f.anim+h.src;if(a.lowHW&&h.lowHW)return a.scales[b]=e[h.lowHW],i=d[b]=f[h.lowHW]+h.src;for(var j=0;j<g.length;++j){var k=g[j];if(h[k])return a.scales[b]=e[k],i=d[b]=f[k]+h.src}return null},a.unload=function(a){if(a instanceof Array)for(var b=a.length-1;b>=0;--b){var c=a[b];i(c)}else i(a)};var i=function(b){if(d[b]){var e=c[b];e&&(e.anim||(e.isFont&&PIXI.BitmapText.fonts[b]&&delete PIXI.BitmapText.fonts[b],PIXI.Texture.destroyTexture(d[b]),delete a.scales[b],delete d[b]))}};a.getAnims=function(a,b,c){void 0===b&&(b=4),0>b&&(b=0);var d,e,f=[],g=[];for(d=1;b>d;++d){var h="";e=1;for(var i=0;d>i;++i)h+="0",e*=10;f.unshift(h),g.push(e)}var j,k,l=g.length,m=c||{},n=PIXI.Texture.fromFrame;for(var o in a){var p=a[o],q=[];for(d=p.numberMin,k=p.numberMax;k>=d;++d){var r=null;for(e=0;l>e;++e)if(d<g[e]){r=f[e]+d;break}r||(r=d.toString());var s=p.name.replace("#",r),t=n(s,!0);t&&(j=t),q.push(j)}m[o]=q}return m},namespace("cloudkid").AssetManager=a,namespace("cloudkid.pixi").AssetManager=a}(),function(){"use strict";var a=function(){};a.prototype={},a.positionItems=function(b,c){var d,e=Math.PI/180;for(var f in c){var g=b[f];if(g){var h=c[f];void 0!==h.x&&(g.position.x=h.x),void 0!==h.y&&(g.position.y=h.y),d=h.scale,d&&(g.scale.x*=d.x,g.scale.y*=d.y),d=h.pivot,d&&(g.pivot.x=d.x,g.pivot.y=d.y),void 0!==h.rotation&&(g.rotation=h.rotation*e),h.hitArea&&(g.hitArea=a.generateHitArea(h.hitArea))}else Debug.error("could not find object '"+f+"'")}},a.generateHitArea=function(a,c){if(c||(c=1),b(a)){if(1==c)return new PIXI.Polygon(a);for(var d=[],e=0,f=a.length;f>e;++e)d.push(new PIXI.Point(a[e].x*c,a[e].y*c));return new PIXI.Polygon(d)}return"rect"!=a.type&&a.type?"ellipse"==a.type?new PIXI.Ellipse((a.x-.5*a.w)*c,(a.y-.5*a.h)*c,a.w*c,a.h*c):"circle"==a.type?new PIXI.Circle(a.x*c,a.y*c,a.r*c):"sector"==a.type?new PIXI.Sector(a.x*c,a.y*c,a.r*c,a.start,a.end):null:new PIXI.Rectangle(a.x*c,a.y*c,a.w*c,a.h*c)};var b=function(a){return"[object Array]"===Object.prototype.toString.call(a)};namespace("cloudkid").Positioner=a,namespace("cloudkid.pixi").Positioner=a}(),function(){"use strict";var a=function(a,b,c){this.width=a,this.height=b,this.ppi=c};a.prototype={},namespace("cloudkid").ScreenSettings=a,namespace("cloudkid.pixi").ScreenSettings=a}(),function(){"use strict";var a,b=function(b,c,d){switch(a=cloudkid.pixi.UIScaler,this._item=b,this._settings=c,this._designedScreen=d,this.origScaleX=b.scale.x,this.origScaleY=b.scale.y,this.origWidth=b.width,this.origBounds={x:0,y:0,width:b.width,height:b.height},this.origBounds.right=this.origBounds.x+this.origBounds.width,this.origBounds.bottom=this.origBounds.y+this.origBounds.height,c.vertAlign){case a.ALIGN_TOP:this.origMarginVert=b.position.y+this.origBounds.y;break;case a.ALIGN_CENTER:this.origMarginVert=.5*d.height-b.position.y;break;case a.ALIGN_BOTTOM:this.origMarginVert=d.height-(b.position.y+this.origBounds.bottom)}switch(c.horiAlign){case a.ALIGN_LEFT:this.origMarginHori=b.position.x+this.origBounds.x;break;case a.ALIGN_CENTER:this.origMarginHori=.5*d.width-b.position.x;break;case a.ALIGN_RIGHT:this.origMarginHori=d.width-(b.position.x+this.origBounds.right)}},c=b.prototype={};c.origMarginHori=0,c.origMarginVert=0,c.origWidth=0,c.origScaleX=0,c.origScaleY=0,c.origBounds=null,c._settings=null,c._item=null,c._designedScreen=null,c.resize=function(b){var c=b.height/this._designedScreen.height,d=b.ppi/this._designedScreen.ppi,e=(b.width-this._designedScreen.width*c)/2,f=c/d;this._settings.minScale&&f<this._settings.minScale?f=this._settings.minScale:this._settings.maxScale&&f>this._settings.maxScale&&(f=this._settings.maxScale),f*=d,this._item.scale.x=this.origScaleX*f,this._item.scale.y=this.origScaleY*f;var g;switch(g=this.origMarginVert*c,this._settings.vertAlign){case a.ALIGN_TOP:this._item.position.y=g-this.origBounds.y*f;break;case a.ALIGN_CENTER:this._item.position.y=.5*b.height-g;break;case a.ALIGN_BOTTOM:this._item.position.y=b.height-g-this.origBounds.bottom*f}switch(g=this.origMarginHori*c,this._settings.horiAlign){case a.ALIGN_LEFT:this._item.position.x=this._settings.titleSafe?e+g-this.origBounds.x*f:g-this.origBounds.x*f;break;case a.ALIGN_CENTER:this._item.position.x=this._settings.centeredHorizontally?.5*(b.width-this._item.width):.5*b.width-g;break;case a.ALIGN_RIGHT:this._item.position.x=this._settings.titleSafe?b.width-e-g-this.origBounds.right*f:b.width-g-this.origBounds.right*f}},c.destroy=function(){this.origBounds=null,this._item=null,this._settings=null,this._designedScreen=null},namespace("cloudkid").UIElement=b,namespace("cloudkid.pixi").UIElement=b}(),function(){"use strict";var a=function(){},b=a.prototype={};b.vertAlign=null,b.horiAlign=null,b.titleSafe=!1,b.maxScale=1,b.minScale=1,b.centeredHorizontally=!1,namespace("cloudkid").UIElementSettings=a,namespace("cloudkid.pixi").UIElementSettings=a}(),function(){"use strict";var a=cloudkid.pixi.UIElementSettings,b=cloudkid.pixi.UIElement,c=cloudkid.pixi.ScreenSettings,d=function(a,b,d,e){this._parent=a,this._items=[],this._designedScreen=new c(b,d,e)},e=d.prototype={},f=new c(0,0,0),g=!1;e._parent=null,e._designedScreen=null,e._items=null,d.ALIGN_TOP="top",d.ALIGN_BOTTOM="bottom",d.ALIGN_LEFT="left",d.ALIGN_RIGHT="right",d.ALIGN_CENTER="center",d.fromJSON=function(a,b,c,e){"boolean"!=typeof e&&(e=!0);var f,g,h,i,j,k=new d(a,b.designedWidth,b.designedHeight,b.designedPPI);for(g in c)f=c[g],f.align?(h=f.align.split("-"),i=h[0],j=h[1]):(i=ALIGN_CENTER,j=ALIGN_CENTER),k.add(a[g],i,j,f.titleSafe||!1,f.minScale||0/0,f.maxScale||0/0,f.centeredHorizontally||!1);return k.resize(),e&&k.destroy(),k},d.init=function(a,b,c){f.width=a,f.height=b,f.ppi=c,g=!0},e.getScale=function(){return f.height/this._designedScreen.height},e.add=function(c,e,f,g,h,i,j){var k=new a;k.vertAlign=e||d.ALIGN_CENTER,k.horiAlign=f||d.ALIGN_CENTER,k.titleSafe="boolean"!=typeof g?!1:g,k.maxScale="number"!=typeof i?0/0:i,k.minScale="number"!=typeof h?0/0:h,k.centeredHorizontally=j||!1,this._items.push(new b(c,k,this._designedScreen))},d.resizeBackground=function(a){if(g){var b,c,d;b=a.height/a.scale.y,c=a.width/a.scale.x,d=f.height/b,a.scale.x=a.scale.y=d,a.position.x=.5*(f.width-a.width)}},d.resizeBackgrounds=function(a){for(var b=0,c=a.length;c>b;++b)d.resizeBackground(a[b])},e.resize=function(){if(this._items.length>0)for(var a=0,b=this._items.length;b>a;++a)this._items[a].resize(f)},e.destroy=function(){if(this._items.length>0)for(var a=0,b=this._items.length;b>a;++a)this._items[a].destroy();this._parent=null,this._designedScreen=null,this._items=null},namespace("cloudkid").UIScaler=d,namespace("cloudkid.pixi").UIScaler=d}();
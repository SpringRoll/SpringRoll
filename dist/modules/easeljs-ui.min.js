/*! SpringRoll 0.3.2 */
!function(){"use strict";!function(a){function b(a){if(!a||"object"!=typeof a)return null;var b=a.constructor();b||(b={});for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}var c,d=include("createjs.Rectangle"),e=include("createjs.Container"),f=include("createjs.ColorMatrix"),g=include("createjs.ColorFilter"),h=include("createjs.ColorMatrixFilter"),i=include("createjs.Text"),j=include("createjs.Event"),k=include("createjs.Point"),l=include("createjs.Bitmap"),m=function(f,g,h){c=include("springroll.Debug",!1),e.call(this),this.back=null,this.label=null,this._overCB=this._onMouseOver.bind(this),this._outCB=this._onMouseOut.bind(this),this._downCB=this._onMouseDown.bind(this),this._upCB=this._onMouseUp.bind(this),this._clickCB=this._onClick.bind(this),this._stateFlags={},this._statePriority=null,this._stateData={},this._width=0,this._height=0,this._offset=new k,this.mouseChildren=!1;var j,m=this._stateData;g&&(j=b(g),delete j.text,j.x===a&&(j.x="center"),j.y===a&&(j.y="center"));var n,o,q,r,s;if(f.image){n=f.image,this._statePriority=f.priority||p;var t,u;for(r=this._statePriority.length-1;r>=0;--r)s=this._statePriority[r],this._addProperty(s),"disabled"!=s&&"up"!=s&&(this._stateFlags[s]=!1),t=f[s],m[s]=t?b(t):m.up,g&&(t&&t.label?(t=t.label,u=m[s].label={},u.font=t.font||j.font,u.color=t.color||j.color,u.stroke=t.hasOwnProperty("stroke")?t.stroke:j.stroke,u.shadow=t.hasOwnProperty("shadow")?t.shadow:j.shadow,u.textBaseline=t.textBaseline||j.textBaseline,u.x=t.x||j.x,u.y=t.y||j.y):m[s].label=j);if(m.up.trim){var v=m.up.trim;o=v.width,q=v.height}else o=m.up.src.width,q=m.up.src.height;!m.up,m.over||(m.over=m.up),m.down||(m.down=m.up),m.disabled||(m.disabled=m.up),f.offset?(this._offset.x=f.offset.x,this._offset.y=f.offset.y):this._offset.x=this._offset.y=0}else n=f,o=n.width,q=n.height/3,this._statePriority=p,m.disabled=m.up={src:new d(0,0,o,q)},m.over={src:new d(0,q,o,q)},m.down={src:new d(0,2*q,o,q)},j&&(m.up.label=m.over.label=m.down.label=m.disabled.label=j),this._offset.x=this._offset.y=0;this.back=new l(n),this.addChild(this.back),this._width=o,this._height=q,g&&(this.label=new i(g.text||"",m.up.label.font,m.up.label.color),this.addChild(this.label)),this.enabled=h===a?!0:!!h},n=extend(m,e);e.prototype;m.BUTTON_PRESS="buttonPress";var o=["disabled","enabled","up","over","down"],p=["disabled","down","over","up"];Object.defineProperty(n,"width",{get:function(){return this._width*this.scaleX},set:function(a){this.scaleX=a/this._width}}),Object.defineProperty(n,"height",{get:function(){return this._height*this.scaleY},set:function(a){this.scaleY=a/this._height}}),n.setText=function(a){if(this.label){this.label.text=a;for(var b,c=0,d=this._statePriority.length;d>c;++c)if(this._stateFlags[this._statePriority[c]]){b=this._stateData[this._statePriority[c]];break}b||(b=this._stateData.up),b=b.label,"center"==b.x?this.label.x=.5*(this._width-this.label.getMeasuredWidth())+this._offset.x:this.label.x=b.x+this._offset.x,"center"==b.y?this.label.y=.5*this._height+this._offset.y:this.label.y=b.y+this._offset.y}},Object.defineProperty(n,"enabled",{get:function(){return!this._stateFlags.disabled},set:function(a){this._stateFlags.disabled=!a,a?(this.cursor="pointer",this.addEventListener("mousedown",this._downCB),this.addEventListener("mouseover",this._overCB),this.addEventListener("mouseout",this._outCB)):(this.cursor=null,this.removeEventListener("mousedown",this._downCB),this.removeEventListener("mouseover",this._overCB),this.removeEventListener("mouseout",this._outCB),this.removeEventListener("pressup",this._upCB),this.removeEventListener("click",this._clickCB),this._stateFlags.down=this._stateFlags.over=!1),this._updateState()},configurable:!0}),n._addProperty=function(a){o.indexOf(a)>=0||Object.defineProperty(this,a,{get:function(){return this._stateFlags[a]},set:function(b){this._stateFlags[a]=b,this._updateState()}})},n._updateState=function(){var a=this.back;if(a){for(var b,c=0,d=this._statePriority.length;d>c;++c)if(this._stateFlags[this._statePriority[c]]){b=this._stateData[this._statePriority[c]];break}b||(b=this._stateData.up),a.sourceRect=b.src,b.rotated?(a.rotation=-90,a.regX=a.sourceRect.width):a.rotation=a.regX=0,b.trim?(a.x=b.trim.x+this._offset.x,a.y=b.trim.y+this._offset.y):(a.x=this._offset.x,a.y=this._offset.y);var e=this.label;e&&(b=b.label,e.textBaseline=b.textBaseline||"middle",e.stroke=b.stroke,e.shadow=b.shadow,e.font=b.font,e.color=b.color||"#000","center"==b.x?e.x=.5*(this._width-e.getMeasuredWidth())+this._offset.x:e.x=b.x+this._offset.x,"center"==b.y?e.y=.5*this._height+this._offset.y:e.y=b.y+this._offset.y)}},n._onMouseDown=function(a){this.addEventListener("pressup",this._upCB),this.addEventListener("click",this._clickCB),this._stateFlags.down=!0,this._updateState()},n._onMouseUp=function(a){this.removeEventListener("pressup",this._upCB),this.removeEventListener("click",this._clickCB),this._stateFlags.down=!1,this._updateState()},n._onClick=function(a){this.dispatchEvent(new j(m.BUTTON_PRESS))},n._onMouseOver=function(a){this._stateFlags.over=!0,this._updateState()},n._onMouseOut=function(a){this._stateFlags.over=!1,this._updateState()},n.destroy=function(){this.removeAllChildren(),this.removeAllEventListeners(),this._downCB=null,this._upCB=null,this._overCB=null,this._outCB=null,this.back=null,this.label=null,this._statePriority=null,this._stateFlags=null,this._stateData=null},m.generateDefaultStates=function(b,c,e){var i=b.width,j=b.height/3,k=document.createElement("canvas"),m=i,n=b.height;c&&(n+=j),e&&(m+=2*e.size,n+=j+2*e.size,e.rgba&&(e.red=e.rgba[0],e.green=e.rgba[1],e.blue=e.rgba[2],e.rgba[3]&&(e.alpha=e.rgba[3]))),k.width=m,k.height=n;var o=k.getContext("2d");o.drawImage(b,0,0);var q={image:k,up:{src:new d(0,0,i,j)},over:{src:new d(0,j,i,j)},down:{src:new d(0,2*j,i,j)}},r=new l(b);r.sourceRect=q.up.src;var s=b.height;if(c){o.save(),o.translate(0,s);var t=new f;c.saturation!==a&&t.adjustSaturation(c.saturation),c.brightness!==a&&t.adjustBrightness(2.55*c.brightness),c.contrast!==a&&t.adjustContrast(c.contrast),r.filters=[new h(t)],r.cache(0,0,q.up.src.width,q.up.src.height),r.draw(o),q.disabled={src:new d(0,s,0|i,0|j)},s+=j,o.restore()}if(e){o.save();var u=i+2*e.size,v=j+2*e.size;r.filters=[new g(0,0,0,1,e.red,e.green,e.blue,e.alpha!==a?-255+e.alpha:0)],r.scaleX=u/i,r.scaleY=v/j,r.x=0,r.y=s,r.cache(0,0,u,v),r.updateContext(o),r.draw(o),o.restore(),r.scaleX=r.scaleY=1,r.x=e.size,r.y=s+e.size,r.filters=null,r.uncache(),r.updateContext(o),r.draw(o);var w=new d(e.size,e.size,u,v);q.up.trim=w,q.over.trim=w,q.down.trim=w,q.disabled&&(q.disabled.trim=w),q.highlighted={src:new d(0,s,0|u,0|v)},q.priority=p.slice(),q.priority.unshift("highlighted"),q.offset={x:-e.size,y:-e.size}}return q},m.generateSettingsFromAtlas=function(a,b,c){for(var e={priority:c},f=c.length-1;f>=0;--f){var g=a.getFrame(b+"_"+c[f]);if(g){e.image||(e.image=g.image);var h=e[c[f]]={src:g.frame};g.rotated&&(h.rotated=!0),g.trimmed&&(h.trim=new d(g.offset.x,g.offset.y,g.width,g.height))}else e[c[f]]=e.up}return e},namespace("springroll").Button=m,namespace("springroll.easeljs").Button=m}(),function(){var a,b=include("springroll.easeljs.Button"),c=function(c,d,e,f,g){a=include("springroll.Sound"),this.clickAlias=f||"ButtonClick",this.overAlias=g||"ButtonRollover",this._audioEnabled=!0,this._onRollover=this._onRollover.bind(this),this._onButtonPress=this._onButtonPress.bind(this),b.call(this,c,d,e)},d=b.prototype,e=extend(c,b);e._onButtonPress=function(b){this.clickAlias&&this._audioEnabled&&a.instance.play(this.clickAlias)},e._onRollover=function(b){this.overAlias&&this.enabled&&this._audioEnabled&&a.instance.play(this.overAlias)},Object.defineProperty(e,"audioEnabled",{get:function(){return this._audioEnabled},set:function(a){this._audioEnabled=a}}),Object.defineProperty(e,"enabled",{get:function(){return!this._stateFlags.disabled},set:function(a){this.removeEventListener("rollover",this._onRollover),this.removeEventListener(b.BUTTON_PRESS,this._onButtonPress),a&&(this.addEventListener("rollover",this._onRollover),this.addEventListener(b.BUTTON_PRESS,this._onButtonPress)),Object.getOwnPropertyDescriptor(d,"enabled").set.call(this,a)}}),e.destroy=function(){this.removeEventListener("rollover",this._onRollover),this.removeEventListener(b.BUTTON_PRESS,this._onButtonPress),this.audioEnabled=!1,d.destroy.apply(this)},namespace("springroll").SoundButton=c,namespace("springroll.easeljs").SoundButton=c}(),function(){var a=function(a){this.obj=a,this.mouseDownObjPos={x:0,y:0},this.dragOffset=new createjs.Point,this.mouseDownStagePos={x:0,y:0}};namespace("springroll").DragData=a,namespace("springroll.easeljs").DragData=a}(),function(){var a,b=include("springroll.easeljs.DragData"),c=function(b,c,d){a||(a=include("createjs.Tween",!1)),this.draggedObj=null,this.dragStartThreshold=20,this.mouseDownStagePos={x:0,y:0},this.mouseDownObjPos={x:0,y:0},this.allowStickyClick=!0,this.isTouchMove=!1,this.isHeldDrag=!1,this.isStickyClick=!1,this.snapSettings=null,this._theStage=b,this._dragOffset=null,this._dragStartCallback=c,this._dragEndCallback=d,this._triggerHeldDrag=this._triggerHeldDrag.bind(this),this._triggerStickyClick=this._triggerStickyClick.bind(this),this._stopDrag=this._stopDrag.bind(this),this._updateObjPosition=this._updateObjPosition.bind(this),this._draggableObjects=[],this._helperPoint=null,this._multitouch=!1},d=c.prototype={};Object.defineProperty(d,"multitouch",{get:function(){return this._multitouch},set:function(a){if(this.draggedObj)if(this._multitouch)for(var b in this.draggedObj)this._stopDrag(b,!0);else this._stopDrag(null,!0);this._multitouch=!!a,this.draggedObj=a?{}:null}}),d.startDrag=function(a,b){this._objMouseDown(b,a)},d._objMouseDown=function(c,d){if(!(!this._multitouch&&this.draggedObj||this._multitouch&&!c)){var e,f,g,h;this._multitouch?(e=new b(d),this.draggedObj[c.pointerID]=e,f=e.mouseDownObjPos,g=e.mouseDownStagePos,h=e.dragOffset):(this.draggedObj=d,f=this.mouseDownObjPos,g=this.mouseDownStagePos,h=this._dragOffset=new createjs.Point),a&&a.removeTweens(d),c&&(h=d.parent.globalToLocal(c.stageX,c.stageY,h),h.x-=d.x,h.y-=d.y),f.x=d.x,f.y=d.y,c?(this._theStage._getPointerData(c.pointerID).target=d,this.allowStickyClick&&"touchstart"!=c.nativeEvent.type?(g.x=c.stageX,g.y=c.stageY,d.addEventListener("pressmove",this._triggerHeldDrag),d.addEventListener("pressup",this._triggerStickyClick)):(this.isTouchMove="touchstart"==c.nativeEvent.type,this.isHeldDrag=!0,this._startDrag(c))):(this.isHeldDrag=!0,this._startDrag())}},d._triggerStickyClick=function(a){this.isStickyClick=!0;var b=this._multitouch?this.draggedObj[a.pointerID].obj:this.draggedObj;b.removeEventListener("pressmove",this._triggerHeldDrag),b.removeEventListener("pressup",this._triggerStickyClick),this._startDrag(a)},d._triggerHeldDrag=function(a){this.isHeldMove=!0;var b,c;this._multitouch?(c=this.draggedObj[a.pointerID].obj,b=this.draggedObj[a.pointerID].mouseDownStagePos):(c=this.draggedObj,b=this.mouseDownStagePos);var d=a.stageX-b.x,e=a.stageY-b.y;d*d+e*e>=this.dragStartThreshold*this.dragStartThreshold&&(this.isHeldDrag=!0,c.removeEventListener("pressmove",this._triggerHeldDrag),c.removeEventListener("pressup",this._triggerStickyClick),this._startDrag(a))},d._startDrag=function(a){var b=this._theStage;b.addEventListener("stagemousemove",this._updateObjPosition),b.addEventListener("stagemouseup",this._stopDrag),this._dragStartCallback(this._multitouch?this.draggedObj[a.pointerID].obj:this.draggedObj)},d.stopDrag=function(a,b){var c=null;if(this._multitouch&&b)for(var d in this.draggedObj)if(this.draggedObj[d].obj==b){c=d;break}this._stopDrag(c,a===!0)},d._stopDrag=function(a,b){var c,d;if(this._multitouch){if(!a){for(d in this.draggedObj)this._stopDrag(d,b);return}d=a,a instanceof createjs.MouseEvent&&(d=a.pointerID);var e=this.draggedObj[d];if(!e)return;c=e.obj,this.mouseDownObjPos.x=e.mouseDownObjPos.x,this.mouseDownObjPos.y=e.mouseDownObjPos.y,delete this.draggedObj[d]}else c=this.draggedObj,this.draggedObj=null;if(c){c.removeEventListener("pressmove",this._triggerHeldDrag),c.removeEventListener("pressup",this._triggerStickyClick);var f=!this._multitouch;if(this._multitouch){var g=!1;for(d in this.draggedObj){g=!0;break}f=!g}f&&(this._theStage.removeEventListener("stagemousemove",this._updateObjPosition),this._theStage.removeEventListener("stagemouseup",this._stopDrag)),this.isTouchMove=!1,this.isStickyClick=!1,this.isHeldMove=!1,b!==!1&&this._dragEndCallback(c)}},d._updateObjPosition=function(a){if(this.isTouchMove||this._theStage.mouseInBounds){var b,c;if(this._multitouch){var d=this.draggedObj[a.pointerID];b=d.obj,c=d.dragOffset}else b=this.draggedObj,c=this._dragOffset;var e=b.parent.globalToLocal(a.stageX,a.stageY,this._helperPoint),g=b._dragBounds;if(g?(b.x=f(e.x-c.x,g.x,g.right),b.y=f(e.y-c.y,g.y,g.bottom)):(b.x=e.x-c.x,b.y=e.y-c.y),this.snapSettings)switch(this.snapSettings.mode){case"points":this._handlePointSnap(e,c,b);break;case"grid":break;case"line":}}},d._handlePointSnap=function(a,b,c){for(var d,f,g=this.snapSettings,h=g.dist*g.dist,i=g.points,j=a.x-b.x,k=a.y-b.y,l=-1,m=null,n=i.length-1;n>=0;--n)d=i[n],f=e(j,k,d.x,d.y),h>=f&&(l>f||-1==l)&&(l=f,m=d);m&&(c.x=m.x,c.y=m.y)};var e=function(a,b,c,d){var e=a-c,f=b-d;return e*e+f*f},f=function(a,b,c){return b>a?b:a>c?c:a},g=function(a){return a===!1?void h.apply(this):(this.addEventListener("mousedown",this._onMouseDownListener),void(this.cursor="pointer"))},h=function(){this.removeEventListener("mousedown",this._onMouseDownListener),this.cursor=null},i=function(a){this._dragMan._objMouseDown(a,this)};d.addObject=function(a,b){b&&(b.right=b.x+b.width,b.bottom=b.y+b.height),a._dragBounds=b,this._draggableObjects.indexOf(a)>=0||(a.enableDrag=g,a.disableDrag=h,a._onMouseDownListener=i.bind(a),a._dragMan=this,this._draggableObjects.push(a))},d.removeObject=function(a){a.disableDrag(),delete a.enableDrag,delete a.disableDrag,delete a._onMouseDownListener,delete a._dragMan,delete a._dragBounds;var b=this._draggableObjects.indexOf(a);b>=0&&this._draggableObjects.splice(b,1)},d.destroy=function(){this.stopDrag(!1),this.draggedObj=null,this._updateObjPosition=null,this._dragStartCallback=null,this._dragEndCallback=null,this._triggerHeldDrag=null,this._triggerStickyClick=null,this._stopDrag=null,this._theStage=null;for(var a,b=this._draggableObjects.length-1;b>=0;--b)a=this._draggableObjects[b],a.disableDrag(),delete a.enableDrag,delete a.disableDrag,delete a._onMouseDownListener,delete a._dragMan,delete a._dragBounds;this._draggableObjects=null,this._helperPoint=null},namespace("springroll").DragManager=c,namespace("springroll.easeljs").DragManager=c}(),function(){function a(a){return 0===a.indexOf("colorSplit-alpha_")?a=a.substr(17):0===a.indexOf("colorSplit-color_")&&(a=a.substr(17)),0===a.indexOf("atlasData_")?a.substr(10):0===a.indexOf("atlasImage_")?a.substr(11):0===a.indexOf("spriteData_")?a.substr(11):0===a.indexOf("spriteImage_")?a.substr(12):0===a.indexOf("bmcConfig_")?a.substr(10):a}var b,c,d,e,f,g,h,i={},j=null,k=null,l=null,m=null;i.init=function(){f||(b=include("springroll.easeljs.BitmapUtils"),c=include("springroll.easeljs.TextureAtlas"),d=include("springroll.Loader"),e=include("springroll.Debug",!1),f=include("springroll.Application"),g=include("springroll.TaskManager"),h=include("springroll.ListTask")),j=[],k={},l={},m={}},i.loadBitmapMovieClip=function(a,b,c,d){(void 0===b||null===b)&&(b="assets/sprites/");var e=[{id:"bmcConfig_"+a,src:b+a+".json"},{id:"atlasData_"+a,src:b+a+"Sprite.json"},{id:"atlasImage_"+a,src:b+a+"Sprite.png"}];i.load(e,c,d)},i.load=function(b,c,d){if(j){for(var e=[],f=0;f<b.length;++f){var k=b[f],l=k.id;-1==j.indexOf(a(l))&&(k.atlasData?(e.push({id:(k.splitForEaselJS?"spriteData_":"atlasData_")+l,src:k.atlasData}),k.alpha?(e.push({id:"colorSplit-alpha_"+(k.splitForEaselJS?"spriteImage_":"atlasImage_")+l,src:k.alpha,alpha:!0}),e.push({id:"colorSplit-color_"+(k.splitForEaselJS?"spriteImage_":"atlasImage_")+l,src:k.color,color:!0})):e.push({id:(k.splitForEaselJS?"spriteImage_":"atlasImage_")+l,src:k.atlasImage})):"string"==typeof k.color&&"string"==typeof k.alpha?(e.push({id:"colorSplit-alpha_"+l,src:k.alpha,alpha:!0}),e.push({id:"colorSplit-color_"+l,src:k.color,color:!0})):e.push(k.bmcConfig===!0?{id:"bmcConfig_"+l,src:k.src}:k.alpha===!0?{id:"colorSplit-alpha_"+l,src:k.src,alpha:!0}:k.color===!0?{id:"colorSplit-color_"+l,src:k.src,color:!0}:k))}if(e.length){var m=new h("assets",e,n.bind(i,c));d?Array.isArray(d)?d.push(m):d instanceof g&&d.addTask(m):g.process([m])}else c&&setTimeout(c,0)}};var n=function(d,e){var f,g={},h={},i={},n={};for(f in e){var p=e[f],q=p.content,r=p.manifestData;if(0===f.indexOf("atlasData_"))f=a(f),h[f]=q;else if(f.indexOf("atlasImage_")>-1)f=a(f),r?r.alpha===!0?g[f]?g[f].alpha=q:g[f]={alpha:q}:r.color===!0?g[f]?g[f].color=q:g[f]={color:q}:g[f]=q:g[f]=q;else if(0===f.indexOf("spriteData_"))f=a(f),n[f]=q;else if(f.indexOf("spriteImage_")>-1)f=a(f),r?r.alpha===!0?i[f]?i[f].alpha=q:i[f]={alpha:q}:r.color===!0?i[f]?i[f].color=q:i[f]={color:q}:i[f]=q:i[f]=q;else if(0===f.indexOf("bmcConfig_"))f=a(f),m[f]=q;else if(-1!=p.url.indexOf(".js")){var s=q.text;if(!s)continue;for(var t=s.split(/[\(!]function\s*\(/),u=0;u<t.length;++u)if(s=t[u]){var v=s.substring(0,s.indexOf(","));if(v)for(var w=new RegExp("\\("+v+".(\\w+)\\s*=","g"),x=w.exec(s);x;)k[x[1]]=f,x=w.exec(s)}}else f=a(f),r?r.alpha===!0?images[f]&&images[f].color?images[f]=o(images[f].color,q):images[f]={alpha:q}:r.color===!0?images[f]&&images[f].alpha?images[f]=o(q,images[f].alpha):images[f]={color:q}:images[f]=q:images[f]=q;-1==j.indexOf(f)&&j.push(f)}for(f in h)g[f]&&(g[f].alpha&&g[f].color&&(g[f]=o(g[f].color,g[f].alpha)),l[f]=new c(g[f],h[f]));for(f in n)if(i[f]){i[f].alpha&&i[f].color&&(i[f]=o(i[f].color,i[f].alpha));var y=n[f].frames;b.loadSpriteSheet(n[f],i[f]);for(var z in y)k[z]=f}d&&d()},o=function(a,b,c){c||(c=document.createElement("canvas")),c.width=Math.max(b.width,a.width),c.height=Math.max(b.height,a.height);var d=c.getContext("2d");return d.save(),d.drawImage(a,0,0),d.globalCompositeOperation="destination-in",d.drawImage(b,0,0),d.restore(),c};i.getAtlas=function(a){return l[a]},i.getBitmapMovieClipConfig=function(a){return m[a]},i.unload=function(b){var c,d,e,f=[];if(Array.isArray(b))for(c=0,d=b.length;d>c;++c)f.push("string"==typeof b[c]?a(b[c]):a(b[c].id));else f.push(a(b));for(c=0,d=f.length;d>c;++c){e=f[c],l[e]&&(l[e].destroy(),delete l[e]),m[e]&&delete m[e],images[e]&&(images[e].src="",delete images[e]);var g=j.indexOf(e);g>0&&j.splice(g,1)}for(e in k)f.indexOf(k[e])>-1&&(delete lib[e],delete k[e])},i.unloadAll=function(){var a,b;for(a=0,b=j.length;b>a;++a)images[asset]&&(images[asset].src="",delete images[asset]);for(a in k)delete lib[a];k={};for(a in l)l[a].destroy(),delete l[a];j.length=0},namespace("springroll.easeljs").AssetManager=i}();}();
/*! SpringRoll 0.3.13 */
!function(){"use strict";!function(){var a=function(){this.onComplete=null,this.onCancelled=null,this.eventList=null,this.listIndex=-1,this.instance=null,this.firstFrame=-1,this.lastFrame=-1,this.isLooping=!1,this.length=0,this.useCaptions=!1,this._paused=!1,this.startTime=0,this.duration=0,this.speed=1,this._time_sec=0,this.soundAlias=null,this.soundInst=null,this.playSound=!1,this.soundStart=0,this.soundEnd=0,this.complete=!1},b=a.prototype;b._nextItem=function(){var a=!1;if(this.isLooping)this.soundInst&&(this.soundInst.stop(),this.soundInst=null),a=!0;else if(this.soundEnd=this.soundStart=0,this.isLooping=this.playSound=this.useCaptions=!1,this.soundInst=this.soundAlias=null,this.startTime=this.length=0,this.firstFrame=this.lastFrame=-1,++this.listIndex>=this.eventList.length)return void(this.complete=!0);var b=this.eventList[this.listIndex];switch(typeof b){case"object":this.firstFrame=b.first,this.lastFrame=b.last,this.length=this.lastFrame-this.firstFrame;var c=this.instance.framerate;this.startTime=this.firstFrame/c,this.duration=this.length/c,this.speed=b.speed,this.isLooping=b.loop;var d=b.animStart;a?this._time_sec=0:this._time_sec=0>d?Math.random()*this.duration:d,b.alias&&(this.soundAlias=b.alias,this.soundStart=b.audioStart,this.playSound=!0,this.useCaptions=b.useCaptions);break;case"number":this.duration=b,this._time_sec=0;break;case"function":b(),this._nextItem()}},Object.defineProperty(b,"time",{get:function(){return 1e3*this._time_sec},set:function(a){this._time_sec=.001*a}}),Object.defineProperty(b,"paused",{get:function(){return this._paused},set:function(a){a!=this._paused&&(this._paused=!!a,this.soundInst&&(this.paused?this.soundInst.pause():this.soundInst.unpause()))}}),namespace("springroll").AnimatorTimeline=a,namespace("springroll.easeljs").AnimatorTimeline=a}(),function(a){var b,c,d=include("springroll.Application"),e=include("springroll.easeljs.AnimatorTimeline"),f={};f.debug=!1,f.captions=null;var g=null,h=null,i=null,j=!1;f.init=function(){g=[],h=[],i={},j=!1,c=include("springroll.Sound",!1),b=include("springroll.Debug",!1)},f.destroy=function(){f.stopAll(null,!0),f.captions=null,g=null,h=null,i=null},f.play=function(b,c,d,e){var h,j;d&&"function"!=typeof d?(j=d,d=j.onComplete,e=j.onCancelled):e===!0&&(e=d),"string"==typeof c&&j&&(h=j.audio||j.soundData||null,c={anim:c,audio:h}),Array.isArray(c)||(c=[c]),g||f.init(),i[b.id]!==a&&f.stop(b);var k=f._makeTimeline(b,c,d,e);if(k.eventList&&k.eventList.length>=1)return k._nextItem(),b.elapsedTime=k.startTime+k._time_sec,b.play(),b.advance(),f._hasTimelines()||f._startUpdate(),g.push(k),i[b.id]=k,k;return d&&d(),null},f._makeTimeline=function(a,b,g,h){var i=new e;if(!f.canAnimate(a))return i;a.tickEnabled=!1;var j;a.framerate?j=a.framerate:(j=d.instance.options.fps,j||(j=15),a.framerate=j),i.instance=a,i.eventList=[],i.onComplete=g,i.onCancelled=h,i.speed=n;for(var k,l,m,n,o,p=a.getLabels(),q=0,r=b.length;r>q;++q){var s=b[q];switch(typeof s){case"string":k=s,l=null,m=0,n=1;break;case"object":k=s.anim,l=s.audio,m="number"==typeof s.start?.001*s.start:0,n=s.speed>0?s.speed:1;break;case"number":i.eventList.push(.001*s);continue;case"function":i.eventList.push(s);continue;default:continue}for(var t,u=k+"_stop",v=k+"_loop",w=-1,x=-1,y=!1,z=0,A=p.length;A>z;++z)if(t=p[z],t.label==k)w=t.position;else{if(t.label==u){x=t.position;break}if(t.label==v){x=t.position,y=!0;break}}var B;w>=0&&x>0&&(B={name:k,first:w,last:x,loop:y,speed:n,animStart:m},l&&c&&("string"==typeof l?(m=0,o=l):(m=l.start>0?.001*l.start:0,o=l.alias),c.instance.exists(o)&&(c.instance.preloadSound(o),B.alias=o,B.audioStart=m,B.useCaptions=f.captions&&f.captions.hasCaption(o))),i.eventList.push(B))}return i},f.canAnimate=function(b){return b?b instanceof createjs.MovieClip?!0:b.framerate!==a&&b.getLabels!==a&&b.elapsedTime!==a&&b._tick!==a&&b.gotoAndStop!==a&&b.play!==a&&b.id!==a?!0:!1:!1},f.instanceHasAnimation=function(a,b){if("function"!=typeof a.getLabels)return!1;for(var c,d=a.getLabels(),e=-1,f=-1,g=b+"_stop",h=b+"_loop",i=0,j=d.length;j>i;++i)if(c=d[i],c.label==b)e=c.position;else if(c.label==g||c.label==h){f=c.position;break}return e>=0&&f>=0},f.getDuration=function(a,b){if("function"!=typeof a.getLabels)return 0;if(Array.isArray(b)){for(var c=0,e=0,g=b.length;g>e;e++)c+=f.getDuration(a,b[e]);return c}if("number"==typeof b)return b;if("object"==typeof b&&b.anim)b=b.anim;else if("string"!=typeof b)return 0;for(var h,i=a.getLabels(),j=-1,k=-1,l=b+"_stop",m=b+"_loop",n=0,o=i.length;o>n;++n)if(h=i[n],h.label==b)j=h.position;else if(h.label==l||h.label==m){k=h.position;break}if(j>=0&&k>0){if(!a.framerate){var p=d.instance.options.fps;p||(p=15),a.framerate=p}return(k-j)/a.framerate*1e3}return 0},f.stop=function(a,b){if(g){var c=i[a.id];c&&(b&&(c.onComplete=c.onCancelled=null),f._remove(c,!0))}},f.stopAll=function(a,b){if(f._hasTimelines())for(var c,d=g.slice(),e=0,h=d.length;h>e;e++)c=d[e],(!a||a.contains(c.instance))&&(b&&(c.onComplete=c.onCancelled=null),f._remove(c,!0))},f._remove=function(a,b){var c=h.indexOf(a);if(c>=0&&h.splice(c,1),c=g.indexOf(a),!(0>c)){var d=a.onComplete,e=a.onCancelled;a.instance.stop(),b&&a.soundInst&&a.soundInst.stop(),g.splice(c,1),delete i[a.instance.id],a.useCaptions&&f.captions.stop(),a.instance=null,a.eventList=null,a.onComplete=null,a.onCancelled=null,f._hasTimelines()||f._stopUpdate(),b?e&&e():d&&d()}},f.pause=function(){if(g&&!j){j=!0;for(var a=0,b=g.length;b>a;a++)g[a].paused=!0;f._stopUpdate()}},f.resume=function(){if(g&&j){j=!1;for(var a=0,b=g.length;b>a;a++)g[a].paused=!1;f._hasTimelines()&&f._startUpdate()}},f.pauseInGroup=function(a,b){if(f._hasTimelines()&&b)for(var c=0,d=g.length;d>c;c++)b.contains(g[c].instance)&&(g[c].paused=a)},f.getTimeline=function(b){return f._hasTimelines()&&i[b.id]!==a?i[b.id]:null},f.getPaused=function(){return j},f._startUpdate=function(){d.instance&&d.instance.on("update",f._update)},f._stopUpdate=function(){d.instance&&d.instance.off("update",f._update)},f._update=function(a){if(g){for(var b,d,e,i,j,m=.001*a,n=g.length-1;n>=0;--n)if(b=g[n],d=b.instance,!b.paused){if(j=!1,i=0,b.soundInst)if(b.soundInst.isValid){if(e=.001*b.soundInst.position,0>e&&(e=0),b._time_sec=b.soundStart+e,b.useCaptions&&f.captions.seek(b.soundInst.position),b._time_sec>=b.duration){if(d.gotoAndStop(b.lastFrame),i=b._time_sec-b.duration,b._nextItem(),b.complete){h.push(b);continue}j=!0}}else{if(b._nextItem(),b.complete){h.push(b);continue}j=!0}else{if(b._time_sec+=m*b.speed,b._time_sec>=b.duration)if(b.isLooping)i=b._time_sec-b.duration,b._nextItem(),j=!0,b.onComplete&&b.onComplete();else{if(i=b._time_sec-b.duration,b.firstFrame>=0&&d.gotoAndStop(b.lastFrame),b._nextItem(),b.complete){h.push(b);continue}j=!0}!j&&b.playSound&&b._time_sec>=b.soundStart&&(b._time_sec=b.soundStart,b.playSound=!1,b.soundInst=c.instance.play(b.soundAlias,l.bind(this,b,b.listIndex,b.soundAlias),k.bind(this,b,b.listIndex)),b.useCaptions&&f.captions.play(b.soundAlias))}if(j){for(b._time_sec+=i;b._time_sec>=b.duration;)i=b._time_sec-b.duration,b._nextItem(),b.complete?(b.firstFrame>=0&&d.gotoAndStop(b.lastFrame),h.push(b)):b._time_sec+=i;b.firstFrame>=0&&d.gotoAndPlay(b.firstFrame),b.playSound&&b._time_sec>=b.soundStart&&(b._time_sec=b.soundStart,b.playSound=!1,b.soundInst=c.instance.play(b.soundAlias,l.bind(this,b,b.listIndex,b.soundAlias),k.bind(this,b,b.listIndex)),b.useCaptions&&f.captions.play(b.soundAlias))}b.firstFrame>=0&&(d.elapsedTime=b.startTime+b._time_sec,d.advance())}for(n=0;n<h.length;n++)b=h[n],f._remove(b)}};var k=function(a,b){a.listIndex==b&&(a.soundEnd=a.soundStart+.001*a.soundInst.length)},l=function(a,b,c){f.captions&&f.captions.currentAlias==c&&f.captions.stop(),a.listIndex==b&&(a.soundEnd>0&&a.soundEnd>a._time_sec&&(a._time_sec=a.soundEnd),a.soundInst=null)};f._hasTimelines=function(){return g?g.length>0:!1},f.toString=function(){return"[springroll.easeljs.Animator]"},namespace("springroll").Animator=f,namespace("springroll.easeljs").Animator=f}(),function(){var a=include("springroll.ApplicationPlugin"),b=include("springroll.easeljs.Animator"),c=new a;c.setup=function(){b.init(),b.captions=this.captions||null},c.teardown=function(){b&&b.destroy()}}(),function(a){"use strict";var b=function(a,b){Array.isArray(a)?this._images=a:(this._images=[a],b=[b]),this.frames={},b[0].meta&&parseFloat(b[0].meta.scale)?this.scale=parseFloat(b[0].meta.scale):this.scale=1;for(var c=0;c<this._images.length;++c){a=this._images[c];var e=b[c].meta&&"http://www.codeandweb.com/texturepacker"==b[c].meta.app,f=b[c].frames;for(var g in f){var h=f[g],i=g.lastIndexOf(".");i>0&&(g=g.substring(0,i)),i=g.lastIndexOf("/"),i>=0&&(g=g.substring(i+1)),this.frames[g]=new d(a,h,e)}}},c=b.prototype={};c.getFrame=function(a){return this.frames[a]||null},c.getFrames=function(b,c,d,e,f){e===a&&(e=4),0>e&&(e=0),f||(f=[]);var g,h,i=[],j=[];for(g=1;e>g;++g){var k="";h=1;for(var l=0;g>l;++l)k+="0",h*=10;i.unshift(k),j.push(h)}var m,n,o=j.length;for(g=c,n=d;n>=g;++g){var p=null;for(h=0;o>h;++h)if(g<j[h]){p=i[h]+g;break}p||(p=g.toString());var q=b.replace("#",p),r=this.frames[q];r&&(m=r),m&&f.push(m)}return f},c.destroy=function(){this.image=null,this.frames=null},namespace("createjs").TextureAtlas=b,namespace("springroll.easeljs").TextureAtlas=b;var d=function(a,b,c){this.image=a,this.rotated=b.rotated;var d=b.frame;this.frame=new createjs.Rectangle(d.x,d.y,b.rotated&&c?d.h:d.w,b.rotated&&c?d.w:d.h),this.trimmed=b.trimmed,this.offset=new createjs.Point(b.spriteSourceSize.x,b.spriteSourceSize.y),this.width=b.sourceSize.w,this.height=b.sourceSize.h}}(),function(a){"use strict";function b(a,b){return a.position-b.position}var c=include("createjs.Container"),d=include("createjs.Point"),e=include("createjs.Rectangle"),f=include("createjs.Bitmap"),g=function(a,b){c.call(this),this.loop=!0,this.currentFrame=0,this.paused=!1,this.nominalBounds=new e,this._framerate=0,this._duration=0,this._t=0,this._prevPosition=0,this._bitmap=0,this._labels=0,this._events=0,this._frames=null,this._currentTexture=null,this._origin=null,this._scale=1,this.mouseChildren=!1,this._bitmap=new f,this.addChild(this._bitmap),a&&b&&this.init(a,b)},h=extend(g,c),i=c.prototype;Object.defineProperty(h,"framerate",{get:function(){return this._framerate},set:function(a){a>0?(this._framerate=a,this._duration=a?this._frames.length/a:0):this._framerate=this._duration=0}}),Object.defineProperty(h,"elapsedTime",{get:function(){return this._t},set:function(a){this._t=a}}),Object.defineProperty(h,"totalFrames",{get:function(){return this._frames.length}}),Object.defineProperty(h,"currentTexture",{get:function(){return this._currentTexture}}),h.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!==this.scaleX&&0!==this.scaleY)},h.draw=function(a,b){return this.DisplayObject_draw(a,b)?!0:(this._updateTimeline(),i.draw.call(this,a,b),!0)},h.play=function(){this.paused=!1},h.stop=function(){this.paused=!0},h.gotoAndPlay=function(a){this.paused=!1,this._goto(a)},h.gotoAndStop=function(a){this.paused=!0,this._goto(a)},h.gotoAndCache=function(a){},h.advance=function(a){this.paused||(this._framerate>0?(a&&(this._t+=.001*a),this._t>this._duration&&(this._t=this.loop?this._t-this._duration:this._duration),this._prevPosition=Math.floor(this._t*this._framerate+1e-7),this._prevPosition>=this._frames.length&&(this._prevPosition=this._frames.length-1)):this._prevPosition=this._prevPosition+1,this._updateTimeline())},h.getLabels=function(){return this._labels},h.getEvents=function(){return this._events},h.getCurrentLabel=function(){for(var a=this._labels,b=null,c=0,d=a.length;d>c&&a[c].position<=this.currentFrame;++c)b=a[c].label;return b},h.init=function(a,c){var e,f=this._labels=[],g=this._events=[];if(c.labels){var h={};for(e in c.labels){var i={label:e,position:c.labels[e],length:1};h[e]=i.position,/_(loop|stop)$/.test(e)||g.push(i),f.push(i)}for(var j=null,k=0;k<g.length;k++){var l=g[k];j=l.position,l.length=h[e+"_stop"]-j||h[e+"_loop"]-j||0}f.sort(b),g.sort(b)}this._frames=[];for(var m,n=0;n<c.frames.length;++n){var o=c.frames[n];e=o.name,m=e.lastIndexOf("/"),m>=0&&(e=e.substring(m+1)),a.getFrames(e,o.min,o.max,o.digits,this._frames)}c.fps?this.framerate=c.fps:this._framerate&&(this.framerate=this._framerate),c.scale&&c.scale>0?this._scale=1/c.scale:this._scale=1,this._bitmap.scaleX=this._bitmap.scaleY=this._scale,c.origin?this._origin=new d(c.origin.x*this._scale,c.origin.y*this._scale):this._origin=new d;var p=this._frames[0],q=this.nominalBounds;q.x=-this._origin.x,q.y=-this._origin.y,q.width=p.width*this._scale,q.height=p.height*this._scale},h.copyFrom=function(a){this._frames=a._frames,this._labels=a._labels,this._origin=a._origin,this._framerate=a._framerate,this._duration=a._duration,this._scale=a._scale,this._bitmap.scaleX=this._bitmap.scaleY=this._scale},g.clone=function(a,b,c){var d=new g;return d.copyFrom(a),d.x=b||a.x,d.y=c||a.y,d},h.destroy=function(){this.removeAllChildren(),this._bitmap=null,this._frames=null,this._origin=null,this._currentTexture=null},h._tick=function(a){this.advance(a&&a.delta),i._tick.call(this,a)},h._goto=function(a){var b=null;if("string"==typeof a){for(var c=this._labels,d=0,e=c.length;e>d;++d)if(c[d].label==a){b=c[d].position;break}}else b=a;null!==b&&(this._prevPosition=b,this._framerate>0?this._t=b/this._framerate:this._t=0,this._updateTimeline())},h._updateTimeline=function(){if(this._prevPosition<0?this._prevPosition=0:this._prevPosition>=this._frames.length&&(this._prevPosition=this._frames.length-1),this.currentFrame=this._prevPosition,this._currentTexture!=this._frames[this.currentFrame]){var a=this._currentTexture=this._frames[this.currentFrame],b=this._bitmap;b.image=a.image,b.sourceRect=a.frame,b.x=-this._origin.x+a.offset.x*b.scaleX,b.y=-this._origin.y+a.offset.y*b.scaleY,a.rotated?(b.rotation=-90,b.regX=b.sourceRect.width):b.rotation=b.regX=0}},h._reset=function(){this._prevPosition=0,this._t=0,this.currentFrame=0},namespace("createjs").BitmapMovieClip=g,namespace("springroll.easeljs").BitmapMovieClip=g}(),function(){var a=include("springroll.Application"),b=function(a){this.clip=a,this.frameRate=24,this.frameDictionary=d(a),this.update=this.update.bind(this)},c=b.prototype,d=function(a){var b,c,d,e={};for(c=a._labels.length-1;c>=0;c--)d=a._labels[c],b=d.label,b.indexOf("_stop")>-1||b.indexOf("_loop")>-1||e[b]||(e[b]={first:d.position,last:null});var f,g;for(c=a._labels.length-1;c>=0;c--)d=a._labels[c],b=d.label,f=b.indexOf("_stop"),g=b.indexOf("_loop"),g>-1&&(e[b.substring(0,g)].last=d.position);return e};c.play=function(b){this.stop();var c=this.frameDictionary[b];this.startFrame=c.last,this.endFrame=c.first,this.framePassed=this.frameRate,this.clip.gotoAndStop(this.endFrame),a.instance.on("update",this.update)},c.goToPreviousFrame=function(){var a=this.clip.currentFrame-1;a<this.endFrame&&(a=this.startFrame),this.clip.gotoAndStop(a)},c.update=function(a){this.framePassed-=a,this.framePassed<=0&&(this.framePassed=this.frameRate,this.goToPreviousFrame())},c.stop=function(){a.instance.off("update",this.update)},namespace("springroll.easeljs").ReversePlayback=b}();}();
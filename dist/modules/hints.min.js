/*! SpringRoll 1.0.3 */
!function(){"use strict";!function(){var a=function(a,b){this._hints=a,this._done=b},b=extend(a);b.play=function(){},b._onPlayComplete=function(a,b){this._done(b),"function"==typeof a&&a()},b.destroy=function(){this._done=null,this._hints=null},namespace("springroll").AbstractHint=a}(),function(){var a=include("springroll.AbstractHint"),b=function(b,c,d,e,f){a.call(this,b,c),this.idOrList=d,this.onComplete=e,this.onCancel=f},c=a.prototype,d=a.extend(b);d.play=function(){this._hints.enabled=!1,this._hints.trigger("vo",{events:this.idOrList,complete:this._onPlayComplete.bind(this,this.onComplete,!1),cancel:this._onPlayComplete.bind(this,this.onCancel,!0)})},d.destroy=function(){this.idOrList=null,this.onComplete=null,this.onCancel=null,c.destroy.call(this)},namespace("springroll").VOHint=b}(),function(){var a=include("springroll.AbstractHint"),b=function(b,c,d,e,f,g){a.call(this,b,c),this.instance=d,this.events=e,this.onComplete=f,this.onCancel=!0===g?f:g},c=a.prototype,d=a.extend(b);d.play=function(){this._hints.enabled=!1,this._hints.trigger("anim",{instance:this.instance,events:this.events,complete:this._onPlayComplete.bind(this,this.onComplete,!1),cancel:this._onPlayComplete.bind(this,this.onCancel,!0)})},d.destroy=function(){this.instance=null,this.events=null,this.onComplete=null,this.onCancel=null,c.destroy.call(this)},namespace("springroll").AnimatorHint=b}(),function(){var a=include("springroll.AbstractHint"),b=function(b,c,d){a.call(this,b,c),this.onStart=d},c=a.prototype,d=a.extend(b);d.play=function(){this._hints.enabled=!1,this.onStart(this._onPlayComplete.bind(this,null,!1),this._onPlayComplete.bind(this,null,!0))},d.destroy=function(){this.onStart=null,c.destroy.call(this)},namespace("springroll").FunctionHint=b}(),function(){var a=include("springroll.AbstractHint"),b=include("springroll.AnimatorHint"),c=include("springroll.FunctionHint"),d=include("springroll.VOHint"),e=function(b,c){a.call(this,b,c),this._tiers=[[]],this._current=-1,this._tier=null,this.nextTier()},f=a.prototype,g=a.extend(e);g.play=function(){this._tier.random().play()},g.vo=function(a,b,c){return this.tier.push(new d(this._hints,this._done,a,b,c)),this},g.anim=function(a,c,d,e){return this.tier.push(new b(this._hints,this._done,a,c,d,e)),this},g.func=function(a){return this.tier.push(new c(this._hints,this._done,a)),this},g.addTier=function(){return this._tier=[],this._tiers.push(this._tier),this},g.nextTier=function(){var a=this._tiers.length;return this._current++,this._current>=a&&(this._current=a-1),this._tier=this._tiers[this._current],this},g.reset=function(){this._current=-1,this.nextTier()},g.destroy=function(){this._tiers=null,this._tier=null,this._current=-1,f.destroy.call(this)},namespace("springroll").GroupHint=e}(),function(){var a=include("springroll.EventDispatcher"),b=include("springroll.AnimatorHint"),c=include("springroll.FunctionHint"),d=include("springroll.VOHint"),e=include("springroll.GroupHint"),f=function(b){a.call(this),this._app=b,this._hint=null,this._duration=0,this._timer=0,this.timerDuration=12e3,this._update=this._update.bind(this),this._done=this._done.bind(this),this.play=this.play.bind(this),this._playing=!1,this._oldHints=[]},g=a.prototype,h=a.extend(f);h.vo=function(a,b,c){return this.set(new d(this,this._done,a,b,c))},h.anim=function(a,c,d,e){return this.set(new b(this,this._done,a,c,d,e))},h.func=function(a){return this.set(new c(this,this._done,a))},h.group=function(){return this.set(new e(this,this._done))},h.set=function(a){return this.clear(),this.enabled=!0,this._hint=a,a},h.clear=function(){this._playing=!1,this.removeTimer(),this.enabled=!1,this._hint&&this._oldHints.push(this._hint),this._hint=null},h.play=function(){return this._hint&&(this._playing=!0,this._hint.play(),this._clearOldHints(),this.trigger("start",this._hint)),this},h.startTimer=function(a){return this._timer=this._duration=a||this.timerDuration,this._app.off("update",this._update).on("update",this._update),this},h.stopTimer=h.removeTimer=function(){return this._app&&this._app.off("update",this._update),this._timer=this._duration=0,this},h.resetTimer=function(){return this._app.off("update",this._update).on("update",this._update),this._timer=this._duration,this},Object.defineProperty(h,"enabled",{set:function(a){this.trigger("enabled",a)}}),h._update=function(a){this._playing||this._timer>0&&(this._timer-=a,this._timer<=0&&(this._app.off("update",this._update),this.play()))},h.funcDone=h._done=function(a){this._playing=!1,this.resetTimer(),this.enabled=!a,this._hint instanceof e&&this._hint.nextTier()},h._clearOldHints=function(){if(this._oldHints.length){for(var a=0;a<this._oldHints.length;a++)this._oldHints[a].destroy();this._oldHints.length=0}},h.destroy=function(){this.clear(),this._clearOldHints(),this._app=null,g.destroy.call(this)},namespace("springroll").HintsPlayer=f}(),function(){var a=include("springroll.ApplicationPlugin"),b=include("springroll.HintsPlayer"),c=new a;c.setup=function(){this.hints=new b(this)},c.preload=function(a){if(!this.animator)throw"No animator";if(!this.voPlayer)throw"No sound";this.hints.on({vo:d.bind(this),anim:e.bind(this)}),this.container&&(this.container.on("playHelp",this.hints.play),this.hints.on("enabled",function(a){this.container.send("helpEnabled",a)}.bind(this))),a()};var d=function(a){this.media?this.media.playInstruction(a.events,a.complete,a.cancel):this.voPlayer.play(a.events,a.complete,a.cancel)},e=function(a){this.media?this.media.playInstruction(a.instance,a.events,a.complete,a.cancel):this.animator.play(a.instance,a.events,a.complete,a.cancel)};c.teardown=function(){this.container&&this.container.off("playHelp"),this.hints&&(this.hints.off("enabled vo anim"),this.hints.destroy(),this.hints=null)}}();}();
/*! SpringRoll 0.3.19 */
!function(){"use strict";!function(){var a,b=function(b,c,d,e){a||(a=include("springroll.ScaleManager")),c=c.split("-"),this.vertAlign=c[0],this.horiAlign=c[1],this.titleSafe=!1,this.maxScale=1,this.minScale=1,this.centeredHorizontally=!1,this._display=b,this._designedScreen=d,this._adapter=e;var f=e.getScale(b),g=e.getPosition(b);switch(this.origScaleX=f.x||1,this.origScaleY=f.y||1,this.origWidth=b.width||0,this.origBounds=e.getLocalBounds(b),this.origMarginHori=0,this.origMarginVert=0,this.vertAlign){case a.ALIGN_TOP:this.origMarginVert=g.y+this.origBounds.y*f.y;break;case a.ALIGN_CENTER:this.origMarginVert=.5*d.height-g.y;break;case a.ALIGN_BOTTOM:this.origMarginVert=d.height-(g.y+this.origBounds.bottom*f.y)}switch(this.horiAlign){case a.ALIGN_LEFT:this.origMarginHori=g.x+this.origBounds.x*f.x;break;case a.ALIGN_CENTER:this.origMarginHori=.5*d.width-g.x;break;case a.ALIGN_RIGHT:this.origMarginHori=d.width-(g.x+this.origBounds.right*f.x)}},c=b.prototype={};Object.defineProperty(c,"display",{get:function(){return this._display}}),c.resize=function(b,c){var d=this._adapter,e=this._display,f=this._designedScreen,g=this.origBounds,h=this.origScaleX,i=this.origScaleY,j=f.width/f.height,k=b/c,l=k>=j?c/f.height:b/f.width,m=k>=j,n=0,o=0;m?n=(b-f.width*l)/2:o=(c-f.height*l)/2;var p=l;this.minScale&&p<this.minScale?p=this.minScale:this.maxScale&&p>this.maxScale&&(p=this.maxScale),d.setScale(e,h*p,"x"),d.setScale(e,i*p,"y");var q,r,s;q=this.origMarginVert*l;var t=this.titleSafe===!0||"vertical"===this.titleSafe;switch(this.vertAlign){case a.ALIGN_TOP:s=t?o+q-g.y*i*p:q-g.y*i*p;break;case a.ALIGN_CENTER:s=.5*c-q;break;case a.ALIGN_BOTTOM:s=t?c-o-q-g.bottom*i*p:c-q-g.bottom*i*p}switch(null!==s&&d.setPosition(e,s,"y"),q=this.origMarginHori*l,t=this.titleSafe===!0||"horizontal"===this.titleSafe,this.horiAlign){case a.ALIGN_LEFT:r=t?n+q-g.x*h*p:q-g.x*h*p;break;case a.ALIGN_CENTER:r=this.centeredHorizontally?.5*(b-e.width):.5*b-q;break;case a.ALIGN_RIGHT:r=t?b-n-q-g.right*h*p:b-q-g.right*h*p}null!==r&&d.setPosition(e,r,"x")},c.destroy=function(){this._adapter=null,this.origBounds=null,this._display=null,this._designedScreen=null},namespace("springroll").ScaleItem=b}(),function(a){var b={},c=Math.PI/180;b.init=function(d,e,f){f||(f=springroll.ScaleManager._getAdapter()),e.x!==a&&f.setPosition(d,e.x,"x"),e.y!==a&&f.setPosition(d,e.y,"y");var g=e.scale,h=f.getScale(d);g&&(f.setScale(d,g.x*h.x,"x"),f.setScale(d,g.y*h.y,"y")),g=e.pivot,g&&f.setPivot(d,g),e.rotation!==a&&(d.rotation=e.rotation,f.useRadians&&(d.rotation*=c)),e.hitArea&&f.setHitArea(d,b.generateHitArea(e.hitArea,1,f))},b.generateHitArea=function(a,b,c){if(c||(c=springroll.ScaleManager._getAdapter()),b||(b=1),Array.isArray(a)){if(1==b)return new c.Polygon(a);for(var d=[],e=0,f=a.length;f>e;++e)d.push(new c.Point(a[e].x*b,a[e].y*b));return new c.Polygon(d)}return"rect"!=a.type&&a.type?"ellipse"==a.type?new c.Ellipse((a.x-.5*a.w)*b,(a.y-.5*a.h)*b,a.w*b,a.h*b):"circle"==a.type?new c.Circle(a.x*b,a.y*b,a.r*b):"sector"==a.type?new c.Sector(a.x*b,a.y*b,a.r*b,a.start,a.end):null:new c.Rectangle(a.x*b,a.y*b,a.w*b,a.h*b)},namespace("springroll").Positioner=b}(),function(a){var b,c=include("springroll.ScaleItem"),d=include("springroll.Positioner"),e=include("springroll.Application"),f=function(a){if(b=include("springroll.Debug",!1),a=Object.merge({enabled:!1,size:null,items:null,display:null,container:null},a),this._items=[],this._size=null,this._scale=1,this._adapter=null,this._backgrounds=[],this._enabled=a.enabled,this.size=a.size,this.display=a.display,a.items){if(!a.container)throw"ScaleManager requires container to add items";this.addItems(a.container,a.items)}this._resize=this._resize.bind(this),this.enabled=this._enabled},g=f.prototype={},h=f.ALIGN_TOP="top",i=f.ALIGN_BOTTOM="bottom",j=f.ALIGN_LEFT="left",k=f.ALIGN_RIGHT="right",l=f.ALIGN_CENTER="center";f._getAdapter=function(a){if(a||(a=e.instance.display),!a)return null;if(!a.adapter)throw"ScaleManager incompatible display";return a.adapter},Object.defineProperty(g,"display",{set:function(a){this._adapter=f._getAdapter(a)}}),Object.defineProperty(g,"size",{set:function(a){if(this._size=a,a){if(!a.width||!a.height)throw"Invalid design settings";var b=e.instance.options;a.maxWidth&&(b.maxWidth=a.maxWidth),a.maxHeight&&(b.maxHeight=a.maxHeight)}},get:function(){return this._size}}),Object.defineProperty(g,"scale",{get:function(){return this._scale}}),Object.defineProperty(g,"numItems",{get:function(){return this._items.length}}),Object.defineProperty(g,"enabled",{get:function(){return this._enabled},set:function(a){this._enabled=a;var b=e.instance;b.off("resize",this._resize),a&&(b.on("resize",this._resize),b.triggerResize())}}),g.removeItems=function(a){if(this._items){var b=this._adapter;this._items.forEach(function(c,d,e){b.contains(a,c.display)&&e.splice(d,1)})}},g.addItems=function(a,b){var c,d;for(d in b)c=b[d],a[d]&&this.addItem(a[d],c,!1);return e.instance.triggerResize(),this},g.addItem=function(b,f,g){g===a&&(g=!0),f||(f={align:l}),"string"==typeof f&&(f={align:f});var m=f.align||l;switch(m){case l:m=m+"-"+m;break;case j:case k:m=l+"-"+m;break;case h:case i:m=m+"-"+l}if(!/^(center|top|bottom)\-(left|right|center)$/.test(m))throw"Item align '"+m+"' is invalid for "+b;d.init(b,f,this._adapter);var n=new c(b,m,this._size,this._adapter);return n.titleSafe="all"==f.titleSafe?!0:f.titleSafe,n.maxScale=f.maxScale||NaN,n.minScale=f.minScale||NaN,n.centeredHorizontally=!!f.centeredHorizontally,this._items.push(n),g&&e.instance.triggerResize(),this},g.addBackground=function(a){if(this._backgrounds.indexOf(a)>-1)throw"Background already added to ScaleManager";return this._backgrounds.push(a),e.instance.triggerResize(),this},g.removeBackground=function(a){if(this._backgrounds){for(var b=0,c=this._backgrounds.length;c>b;b++)if(a===this._backgrounds[b])return this._backgrounds.splice(b,1),this;return this}},g._resize=function(a,b){var c=this._size;if(c){var d=c.width/c.height,e=a/b;this._scale=e>d?b/c.height:a/c.width;var f,g=e>=d,h=this._items,i=h.length;if(i>0)for(f=0;i>f;++f)h[f].resize(a,b);var j=this._backgrounds,k=this._adapter;if(i=j.length,i>0){var l,m,n,o,p,q=c.maxWidth||c.width,r={x:0,y:0};for(f=0;i>f;f++)l=j[f],m=k.getBitmapSize(l),o=m.w/q,p=o*(g?c.height:c.width),n=(g?b:a)/p,k.setScale(l,n),r.x=.5*(a-m.w*n),r.y=.5*(b-m.h*n),k.setPosition(l,r)}}},g.destroy=function(){this.enabled=!1,this._items.forEach(function(a){a.destroy()}),this._backgrounds=null,this._adapter=null,this._size=null,this._items=null},namespace("springroll").ScaleManager=f,namespace("springroll").UIScaler=f}(),function(){var a,b=include("springroll.ApplicationPlugin"),c=include("springroll.ScaleManager"),d=new b;d.setup=function(){a=include("springroll.Debug",!1),this.scaling=new c,this.on("configLoaded",function(a){var b=a.scalingSize;b&&(this.scaling.size=b)}),this.once("afterInit",function(){var a=this.config;a&&a.scaling&&this.scaling.addItems(this,a.scaling)})},d.preload=function(a){this.scaling.display=this.display,this.scaling.enabled=!0,a()},d.teardown=function(){this.scaling&&this.scaling.destroy(),this.scaling=null}}(),function(){var a=include("springroll.ApplicationPlugin"),b=new a(100);b.setup=function(){this.isIOS=navigator.userAgent.search(/iPhone|iPad|iPod/)>-1,this.isAndroid=navigator.userAgent.search(/Android/)>-1,this.hasTouch=!!("ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0)},b.preload=function(a){if(this.filters){var b=this.hasTouch?"_touch":"_mouse";this.filters.add("%INTERACTION%",b),this.filters.add("%UI%",b)}a()}}();}();